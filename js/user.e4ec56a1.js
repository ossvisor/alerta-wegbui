(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{1711:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-fab-transition",[s("v-btn",{directives:[{name:"has-perms",rawName:"v-has-perms",value:t.perms,expression:"perms"}],key:"add",attrs:{color:"accent",fab:"",fixed:"",bottom:"",right:""},on:{click:t.addToList}},[s("v-icon",{attrs:{color:"white"}},[t._v("\n      add\n    ")])],1)],1)},i=[],n={props:{perms:{type:String,required:!0}},methods:{addToList:function(){this.$emit("add-to-list")}}},r=n,o=s("2877"),l=s("6544"),c=s.n(l),u=s("8336"),d=s("0789"),m=s("132d"),v=Object(o["a"])(r,a,i,!1,null,null,null);e["a"]=v.exports;c()(v,{VBtn:u["a"],VFabTransition:d["b"],VIcon:m["a"]})},"17be":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"keys"},[s("api-key-list")],1)},i=[],n=s("d225"),r=s("308d"),o=s("6bb5"),l=s("4e2b"),c=s("9ab4"),u=s("60a3"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-form",{ref:"form"},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v("\n            "+t._s(t.formTitle)+"\n          ")])]),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-tooltip",{key:t.copyIconText,attrs:{right:""}},[t.editedItem.key?s("v-text-field",{attrs:{slot:"activator",label:t.$t("APIKey"),readonly:"",monospace:"","append-icon":"content_copy"},on:{"click:append":function(e){return t.clipboardCopy(t.editedItem.key)}},slot:"activator",model:{value:t.editedItem.key,callback:function(e){t.$set(t.editedItem,"key",e)},expression:"editedItem.key"}}):t._e(),s("span",[t._v(t._s(t.copyIconText))])],1)],1),t.isAdmin?t._e():s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("User"),readonly:""},model:{value:t.editedItem.user,callback:function(e){t.$set(t.editedItem,"user",e)},expression:"editedItem.user"}})],1),t.isAdmin?s("v-flex",{attrs:{xs12:""}},[s("v-select",{attrs:{items:t.users,label:t.$t("User")},model:{value:t.editedItem.user,callback:function(e){t.$set(t.editedItem,"user",e)},expression:"editedItem.user"}})],1):t._e(),t.$config.customer_views?s("v-flex",{attrs:{xs12:""}},[s("v-select",{attrs:{items:t.allowedCustomers,label:t.$t("Customer")},model:{value:t.editedItem.customer,callback:function(e){t.$set(t.editedItem,"customer",e)},expression:"editedItem.customer"}})],1):t._e(),s("v-flex",{attrs:{xs12:""}},[s("v-autocomplete",{attrs:{items:t.allowedScopes,label:t.$t("Scopes"),chips:"",clearable:"",solo:"",multiple:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[s("v-chip",{attrs:{selected:e.selected,close:""}},[s("strong",[t._v(t._s(e.item))]),t._v(" \n                      "),s("span",[t._v("("+t._s(t.$t("scope"))+")")])])]}}]),model:{value:t.editedItem.scopes,callback:function(e){t.$set(t.editedItem,"scopes",e)},expression:"editedItem.scopes"}})],1),s("v-flex",{attrs:{xs12:""}},[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[s("v-text-field",{attrs:{slot:"activator",label:t.$t("Expires"),"prepend-icon":"event",readonly:""},slot:"activator",model:{value:t.pickerDate,callback:function(e){t.pickerDate=e},expression:"pickerDate"}}),s("v-date-picker",{attrs:{min:(new Date).toISOString().slice(0,10)},on:{input:function(e){t.menu=!1}},model:{value:t.pickerDate,callback:function(e){t.pickerDate=e},expression:"pickerDate"}})],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:"Comment"},model:{value:t.editedItem.text,callback:function(e){t.$set(t.editedItem,"text",e)},expression:"editedItem.text"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("\n            "+t._s(t.$t("Cancel"))+"\n          ")]),s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.save}},[t._v("\n            "+t._s(t.$t("Save"))+"\n          ")])],1)],1)],1)],1),s("v-card",[s("v-card-title",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("APIKeys"))+"\n      "),s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"search",label:t.$t("Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),s("v-data-table",{staticClass:"px-2",attrs:{headers:t.computedHeaders,items:t.keys,"rows-per-page-items":t.rowsPerPageItems,pagination:t.pagination,search:t.search,loading:t.isLoading,"must-sort":"","sort-icon":"arrow_drop_down"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-no-wrap",attrs:{monospace:""}},[t._v("\n          "+t._s(e.item.key)+"\n          "),s("v-tooltip",{key:t.copyIconText,attrs:{top:""}},[s("v-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"activator",value:e.item.key},on:{click:function(s){return t.clipboardCopy(e.item.key)}},slot:"activator"},[t._v("\n              content_copy\n            ")]),s("span",[t._v(t._s(t.copyIconText))])],1)],1),s("td",[t.isExpired(e.item.expires)?t._e():s("v-tooltip",{attrs:{top:""}},[s("v-icon",{attrs:{slot:"activator",color:"primary",small:""},slot:"activator"},[t._v("\n              check_circle\n            ")]),s("span",[t._v(t._s(t.$t("Active")))])],1),t.isExpired(e.item.expires)?s("v-tooltip",{attrs:{top:""}},[s("v-icon",{attrs:{slot:"activator",small:""},slot:"activator"},[t._v("\n              error_outline\n            ")]),s("span",[t._v(t._s(t.$t("Expired")))])],1):t._e()],1),s("td",[t._v(t._s(e.item.user))]),s("td",t._l(e.item.scopes,(function(e){return s("v-chip",{key:e,attrs:{small:""}},[s("strong",[t._v(t._s(e))]),t._v(" \n            "),s("span",[t._v("("+t._s(t.$t("scope"))+")")])])})),1),s("td",[t._v(t._s(e.item.text))]),s("td",[s("date-time",{attrs:{value:e.item.expireTime,format:"mediumDate"}})],1),s("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.count)+"\n        ")]),s("td",[t._v(t._s(t._f("timeago")(e.item.lastUsedTime)))]),t.$config.customer_views?s("td",[t._v("\n          "+t._s(e.item.customer)+"\n        ")]):t._e(),s("td",{staticClass:"text-no-wrap"},[s("v-btn",{directives:[{name:"has-perms",rawName:"v-has-perms.disable",value:"write:keys",expression:"'write:keys'",modifiers:{disable:!0}}],staticClass:"btn--plain mr-0",attrs:{icon:""},on:{click:function(s){return t.editItem(e.item)}}},[s("v-icon",{attrs:{small:"",color:"grey darken-3"}},[t._v("\n              edit\n            ")])],1),s("v-btn",{directives:[{name:"has-perms",rawName:"v-has-perms.disable",value:"admin:keys",expression:"'admin:keys'",modifiers:{disable:!0}}],staticClass:"btn--plain mx-0",attrs:{icon:""},on:{click:function(s){return t.deleteItem(e.item)}}},[s("v-icon",{attrs:{small:"",color:"grey darken-3"}},[t._v("\n              delete\n            ")])],1),s("v-btn",{directives:[{name:"has-perms",rawName:"v-has-perms.disable",value:"admin:keys",expression:"'admin:keys'",modifiers:{disable:!0}}],staticClass:"btn--plain mx-0",attrs:{href:"data:text/plain;base64,"+t.toData(e.item),download:"key_"+e.item.id+".json",icon:""}},[s("v-icon",{attrs:{small:"",color:"grey darken-3"}},[t._v("\n              get_app\n            ")])],1)],1)]}}])},[s("template",{slot:"no-data"},[s("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n          "+t._s(t.$t("NoDisplay"))+"\n        ")])],1),s("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v("\n        "+t._s(t.$t("SearchNoResult1"))+' "'+t._s(t.search)+'" '+t._s(t.$t("SearchNoResult2"))+"\n      ")])],2)],1),s("list-button-add",{attrs:{perms:"write:keys"},on:{"add-to-list":function(e){t.dialog=!0}}})],1)},m=[],v=(s("ac6a"),s("6377")),p=s("1711"),f=s("b74e"),h=s("c1df"),g=s.n(h),b=s("fe0b"),x={components:{DateTime:v["a"],ListButtonAdd:p["a"]},data:function(t){return{descending:!0,page:1,rowsPerPageItems:[10,20,30,40,50],pagination:{sortBy:"lastUsedTime",rowsPerPage:20},search:"",dialog:!1,headers:[{text:b["a"].t("APIKey"),value:"key",sortable:!1},{text:"",value:"expireTime"},{text:b["a"].t("User"),value:"user"},{text:b["a"].t("Scopes"),value:"scopes"},{text:b["a"].t("Description"),value:"text"},{text:b["a"].t("Expires"),value:"expireTime"},{text:b["a"].t("Count"),value:"count"},{text:b["a"].t("LastUsed"),value:"lastUsedTime"},{text:b["a"].t("Customer"),value:"customer"},{text:b["a"].t("Actions"),value:"name",sortable:!1}],editedId:null,editedItem:{key:"",user:t.editedId?null:t.username(),text:"",customer:null,scopes:[],expireTime:null},menu:!1,pickerDate:t.defaultExpireTime(),defaultItem:{user:t.editedId?null:t.username(),text:"",customer:null,scopes:[],expireTime:null},copyIconText:b["a"].t("Copy")}},computed:{computedHeaders:function(){var t=this;return this.headers.filter((function(e){return!!t.$config.customer_views||"customer"!=e.value}))},keys:function(){return this.$store.state.keys.keys},users:function(){return this.$store.state.users.users.map((function(t){return t.login}))},allowedScopes:function(){return f["a"].getAllowedScopes(this.$store.getters["auth/scopes"],this.$store.state.perms.scopes)},allowedCustomers:function(){return this.$store.getters["customers/customers"]},isAdmin:function(){return this.$store.getters["auth/isAdmin"]},isLoading:function(){return this.$store.state.keys.isLoading},formTitle:function(){return this.editedId?b["a"].t("EditApiKey"):b["a"].t("NewApiKey")},refresh:function(){return this.$store.state.refresh}},watch:{dialog:function(t){t||this.close()},refresh:function(t){t||this.getApiKeys()}},created:function(){this.getApiKeys(),this.getUsers(),this.getScopes(),this.getCustomers()},methods:{getApiKeys:function(){this.$store.dispatch("keys/getKeys")},getUsers:function(){this.$store.dispatch("users/getUsers")},getScopes:function(){this.$store.dispatch("perms/getScopes")},getCustomers:function(){this.$store.dispatch("customers/getCustomers")},defaultExpireTime:function(){return g()().add(1,"Year").endOf("day").toISOString().slice(0,10)},username:function(){return this.$store.getters["auth/getUsername"]},endOfDay:function(t){var e=new Date(t);return e.setHours(23,59,59,999),e.toISOString()},editItem:function(t){this.editedId=t.id,this.editedItem=Object.assign({},t),this.pickerDate=t.expireTime.slice(0,10),this.dialog=!0},deleteItem:function(t){confirm(b["a"].t("ConfirmDelete"))&&this.$store.dispatch("keys/deleteKey",t.id)},close:function(){var t=this;this.dialog=!1,setTimeout((function(){t.editedItem=Object.assign({},t.defaultItem),t.pickerDate=t.defaultExpireTime(),t.editedId=null}),300)},save:function(){this.editedId?this.$store.dispatch("keys/updateKey",[this.editedId,{user:this.editedItem.user,scopes:this.editedItem.scopes,text:this.editedItem.text,expireTime:this.endOfDay(this.pickerDate),customer:this.editedItem.customer}]):this.$store.dispatch("keys/createKey",Object.assign(this.editedItem,{expireTime:this.endOfDay(this.pickerDate)})),this.close()},isExpired:function(t){return(new Date).getTime()>new Date(t).getTime()},clipboardCopy:function(t){var e=this;this.copyIconText=b["a"].t("Copied");var s=document.createElement("textarea");s.textContent=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),setTimeout((function(){e.copyIconText=b["a"].t("Copy")}),2e3)},toData:function(t){return btoa(JSON.stringify(t))}}},_=x,$=(s("293a"),s("2877")),k=s("6544"),T=s.n(k),y=s("0798"),I=s("c6a6"),C=s("8336"),D=s("b0af"),w=s("99d9"),S=s("12b2"),O=s("cc20"),V=s("a523"),j=s("8fea"),P=s("2e4b"),E=s("169a"),A=s("0e8f"),L=s("4bd4"),H=s("132d"),M=s("a722"),F=s("e449"),R=s("b56d"),B=s("9910"),Y=s("2677"),U=s("3a2f"),N=Object($["a"])(_,d,m,!1,null,null,null),z=N.exports;T()(N,{VAlert:y["a"],VAutocomplete:I["a"],VBtn:C["a"],VCard:D["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:S["a"],VChip:O["a"],VContainer:V["a"],VDataTable:j["a"],VDatePicker:P["a"],VDialog:E["a"],VFlex:A["a"],VForm:L["a"],VIcon:H["a"],VLayout:M["a"],VMenu:F["a"],VSelect:R["a"],VSpacer:B["a"],VTextField:Y["a"],VTooltip:U["a"]});var K=function(t){function e(){return Object(n["a"])(this,e),Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),e}(u["c"]);K=Object(c["a"])([Object(u["a"])({components:{ApiKeyList:z}})],K);var q=K,G=q,J=Object($["a"])(G,a,i,!1,null,null,null);e["default"]=J.exports},"26d3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"settings"},[s("preferences")],1)},i=[],n=s("d225"),r=s("308d"),o=s("6bb5"),l=s("4e2b"),c=s("9ab4"),u=s("60a3"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{ref:"form"},[s("v-card",{staticClass:"pl-3",attrs:{flat:""}},[s("v-card-title",{staticClass:"pb-0"},[s("div",[s("div",{staticClass:"headline"},[t._v("\n          "+t._s(t.$t("ApplicationSettings"))+"\n        ")])])]),s("v-card-actions",[s("v-radio-group",{staticClass:"mt-0"},[s("v-checkbox",{staticClass:"my-0",attrs:{label:t.$t("DarkTheme"),"hide-details":""},model:{value:t.isDark,callback:function(e){t.isDark=e},expression:"isDark"}}),s("v-checkbox",{staticClass:"my-0",attrs:{label:t.$t("PlaySounds"),"hide-details":""},model:{value:t.isPlaySounds,callback:function(e){t.isPlaySounds=e},expression:"isPlaySounds"}})],1)],1)],1),s("v-card",{staticClass:"pl-3",attrs:{flat:""}},[s("v-flex",{attrs:{sm6:"",md4:""}},[s("v-card-title",{staticClass:"pb-0"},[s("div",[s("div",{staticClass:"headline"},[t._v("\n            "+t._s(t.$t("LanguageSettings"))+"\n          ")])])]),s("v-card-actions",[s("v-layout",{attrs:{column:""}},[s("v-select",{attrs:{items:t.languages,label:t.$t("Languages")},model:{value:t.isLanguages,callback:function(e){t.isLanguages=e},expression:"isLanguages"}})],1)],1)],1)],1),s("v-card",{staticClass:"pl-3",attrs:{flat:""}},[s("v-flex",{attrs:{sm6:"",md4:""}},[s("v-card-title",{staticClass:"pb-0"},[s("div",[s("div",{staticClass:"headline"},[t._v("\n            "+t._s(t.$t("DateTimeSettings"))+"\n          ")])])]),s("v-card-actions",[s("v-layout",{attrs:{column:""}},[s("v-select",{attrs:{items:t.computedDateFormats,label:t.$t("LongDate")},model:{value:t.longDate,callback:function(e){t.longDate=e},expression:"longDate"}}),s("v-select",{attrs:{items:t.computedDateFormats,label:t.$t("MediumDate")},model:{value:t.mediumDate,callback:function(e){t.mediumDate=e},expression:"mediumDate"}}),s("v-select",{attrs:{items:t.computedTimeFormats,label:t.$t("ShortDate")},model:{value:t.shortTime,callback:function(e){t.shortTime=e},expression:"shortTime"}}),s("v-select",{attrs:{items:t.timezoneOptions,label:t.$t("DisplayMode")},model:{value:t.timezone,callback:function(e){t.timezone=e},expression:"timezone"}})],1)],1)],1)],1),s("v-card",{staticClass:"pl-3",attrs:{flat:""}},[s("v-flex",{attrs:{sm6:"",md4:""}},[s("v-card-title",{staticClass:"pb-0"},[s("div",[s("div",{staticClass:"headline"},[t._v("\n            "+t._s(t.$t("AlertSettings"))+"\n          ")])])]),s("v-card-actions",[s("v-layout",{attrs:{column:""}},[s("v-combobox",{attrs:{items:t.rowsPerPageItems,label:t.$t("PageRows"),type:"number",suffix:t.$t("rows")},model:{value:t.rowsPerPage,callback:function(e){t.rowsPerPage=t._n(e)},expression:"rowsPerPage"}}),s("v-combobox",{attrs:{items:t.refreshOptions,label:t.$t("RefreshInterval"),type:"number",suffix:t.$t("seconds")},model:{value:t.refreshInterval,callback:function(e){t.refreshInterval=t._n(e)},expression:"refreshInterval"}}),s("v-combobox",{attrs:{items:t.shelveTimeoutOptions,label:t.$t("ShelveTimeout"),type:"number",suffix:t.$t("hours")},model:{value:t.shelveTimeout,callback:function(e){t.shelveTimeout=t._n(e)},expression:"shelveTimeout"}})],1)],1)],1)],1),s("v-card",{attrs:{flat:""}},[s("v-flex",{attrs:{sm6:"",md4:""}},[s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.reset}},[t._v("\n          "+t._s(t.$t("Reset"))+"\n        ")])],1)],1)],1)],1)},m=[],v=(s("ac6a"),s("5df3"),s("4f7f"),s("75fc")),p=s("c1df"),f=s.n(p),h=s("fe0b"),g={data:function(t){return{mediumDateFormats:["l","L","ll","LL","ddd D MMM HH:mm","lll","llll","LLL","LLLL"],longDateFormats:["ddd D MMM, YYYY HH:mm:ss.SSS Z","l hh:mm:ss.SSS A","YYYY-MM-DD HH:mm:ss.SSS Z","YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"],timeFormats:["LT","LTS","hh:mm:ss.SSS A","HH:mm","HH:mm:ss","HH:mm:ss.SSS","HH:mm:ss.SSS Z"],refreshOptions:[2,5,10,30,60],shelveTimeoutOptions:[1,2,4,8,24]}},computed:{languages:function(){return[{text:h["a"].t("English"),value:"en"},{text:h["a"].t("French"),value:"fr"}]},timezoneOptions:function(){return[{text:h["a"].t("UseLocal"),value:"local"},{text:h["a"].t("UseUTC"),value:"utc"}]},isLanguages:{get:function(){return this.$store.getters.getPreference("languagePref")},set:function(t){this.$store.dispatch("setUserPrefs",{languagePref:t})}},isDark:{get:function(){return this.$store.getters.getPreference("isDark")},set:function(t){this.$store.dispatch("toggle",["isDark",t])}},isPlaySounds:{get:function(){return!this.$store.getters.getPreference("isMute")},set:function(t){this.$store.dispatch("toggle",["isMute",!t])}},computedDateFormats:function(){f.a.locale(h["a"].locale);var t=Object(v["a"])(new Set([this.$store.getters.getConfig("dates").mediumDate].concat(Object(v["a"])(this.mediumDateFormats),[this.$store.getters.getConfig("dates").longDate],Object(v["a"])(this.longDateFormats))));return t.map((function(t){return{text:f()().format(t),value:t}}))},computedTimeFormats:function(){f.a.locale(h["a"].locale);var t=Object(v["a"])(new Set([this.$store.getters.getConfig("dates").shortTime].concat(Object(v["a"])(this.timeFormats))));return t.map((function(t){return{text:f()().format(t),value:t}}))},longDate:{get:function(){return this.$store.getters.getPreference("dates").longDate||this.$store.getters.getConfig("dates").longDate},set:function(t){this.$store.dispatch("setUserPrefs",{dates:{longDate:t}})}},mediumDate:{get:function(){return this.$store.getters.getPreference("dates").mediumDate||this.$store.getters.getConfig("dates").mediumDate},set:function(t){this.$store.dispatch("setUserPrefs",{dates:{mediumDate:t}})}},shortTime:{get:function(){return this.$store.getters.getPreference("dates").shortTime||this.$store.getters.getConfig("dates").shortTime},set:function(t){this.$store.dispatch("setUserPrefs",{dates:{shortTime:t}})}},timezone:{get:function(){return this.$store.state.prefs.timezone},set:function(t){this.$store.dispatch("setUserPrefs",{timezone:t})}},rowsPerPageItems:function(){return this.$store.state.alerts.pagination.rowsPerPageItems},rowsPerPage:{get:function(){return this.$store.getters.getPreference("rowsPerPage")||this.$store.state.alerts.pagination.rowsPerPage},set:function(t){this.$store.dispatch("setUserPrefs",{rowsPerPage:t})}},refreshInterval:{get:function(){return(this.$store.getters.getPreference("refreshInterval")||this.$store.getters.getConfig("refresh_interval"))/1e3},set:function(t){this.$store.dispatch("setUserPrefs",{refreshInterval:1e3*t})}},shelveTimeout:{get:function(){return this.$store.getters.getPreference("shelveTimeout")/60/60},set:function(t){this.$store.dispatch("setUserPrefs",{shelveTimeout:60*t*60})}}},mounted:function(){this.$store.dispatch("getUserPrefs")},methods:{reset:function(){this.$store.dispatch("resetUserPrefs")}}},b=g,x=s("2877"),_=s("6544"),$=s.n(_),k=s("8336"),T=s("b0af"),y=s("99d9"),I=s("12b2"),C=s("ac7c"),D=s("2b5d"),w=s("0e8f"),S=s("4bd4"),O=s("a722"),V=(s("94a7"),s("60d0"),s("c37a")),j=s("5e28"),P=s("94ab"),E=V["a"].extend({name:"v-radio-group",mixins:[j["a"],Object(P["b"])("radio")],model:{prop:"value",event:"change"},provide:function(){return{radio:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},mandatory:{type:Boolean,default:!0},name:String,row:Boolean,value:{default:null}},data:function(){return{internalTabIndex:-1,radios:[]}},computed:{classes:function(){return{"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row}}},watch:{hasError:"setErrorState",internalValue:"setActiveRadio"},mounted:function(){this.setErrorState(this.hasError),this.setActiveRadio()},methods:{genDefaultSlot:function(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{role:"radiogroup"}},V["a"].options.methods.genDefaultSlot.call(this))},onRadioChange:function(t){this.disabled||(this.hasInput=!0,this.internalValue=t,this.setActiveRadio(),this.$nextTick(this.validate))},onRadioBlur:function(t){t.relatedTarget&&t.relatedTarget.classList.contains("v-radio")||(this.hasInput=!0,this.$emit("blur",t))},register:function(t){t.isActive=this.valueComparator(this.internalValue,t.value),t.$on("change",this.onRadioChange),t.$on("blur",this.onRadioBlur),this.radios.push(t)},setErrorState:function(t){for(var e=this.radios.length;--e>=0;)this.radios[e].parentError=t},setActiveRadio:function(){for(var t=this.radios.length;--t>=0;){var e=this.radios[t];e.isActive=this.valueComparator(this.internalValue,e.value)}},unregister:function(t){t.$off("change",this.onRadioChange),t.$off("blur",this.onRadioBlur);var e=this.radios.findIndex((function(e){return e===t}));e>-1&&this.radios.splice(e,1)}}}),A=s("b56d"),L=s("9910"),H=Object(x["a"])(b,d,m,!1,null,null,null),M=H.exports;$()(H,{VBtn:k["a"],VCard:T["a"],VCardActions:y["a"],VCardTitle:I["a"],VCheckbox:C["a"],VCombobox:D["a"],VFlex:w["a"],VForm:S["a"],VLayout:O["a"],VRadioGroup:E,VSelect:A["a"],VSpacer:L["a"]});var F=function(t){function e(){return Object(n["a"])(this,e),Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),e}(u["c"]);F=Object(c["a"])([Object(u["a"])({components:{Preferences:M}})],F);var R=F,B=R,Y=Object(x["a"])(B,a,i,!1,null,null,null);e["default"]=Y.exports},"293a":function(t,e,s){"use strict";var a=s("d408"),i=s.n(a);i.a},"411e":function(t,e,s){},"60d0":function(t,e,s){},8462:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"blackouts"},[s("blackout-list")],1)},i=[],n=s("d225"),r=s("308d"),o=s("6bb5"),l=s("4e2b"),c=s("9ab4"),u=s("60a3"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-dialog",{attrs:{"max-width":"540px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-form",{ref:"form"},[s("v-card",[s("v-card-title",[s("span",{staticClass:"headline"},[t._v("\n            "+t._s(t.formTitle)+"\n          ")])]),s("v-card-text",[s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{wrap:""}},[t.$config.customer_views?s("v-flex",{attrs:{xs12:""}},[s("v-select",{attrs:{items:t.allowedCustomers,label:t.$t("Customer"),clearable:""},model:{value:t.editedItem.customer,callback:function(e){t.$set(t.editedItem,"customer",e)},expression:"editedItem.customer"}})],1):t._e(),s("v-flex",{attrs:{xs12:""}},[s("v-select",{attrs:{items:t.allowedEnvironments,label:t.$t("Environment"),rules:[t.rules.required],required:""},model:{value:t.editedItem.environment,callback:function(e){t.$set(t.editedItem,"environment",e)},expression:"editedItem.environment"}})],1),s("v-flex",{attrs:{xs4:""}},[s("v-menu",{ref:"menu1",attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[s("v-text-field",{attrs:{slot:"activator",label:t.$t("StartDate"),"prepend-icon":"event"},slot:"activator",model:{value:t.editedItem.period.startDate,callback:function(e){t.$set(t.editedItem.period,"startDate",e)},expression:"editedItem.period.startDate"}}),s("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu1=!1}},model:{value:t.editedItem.period.startDate,callback:function(e){t.$set(t.editedItem.period,"startDate",e)},expression:"editedItem.period.startDate"}})],1)],1),s("v-flex",{attrs:{xs2:""}},[s("v-combobox",{attrs:{items:t.times},model:{value:t.editedItem.period.startTime,callback:function(e){t.$set(t.editedItem.period,"startTime",e)},expression:"editedItem.period.startTime"}})],1),s("v-flex",{attrs:{xs2:""}},[s("v-combobox",{attrs:{items:t.times},model:{value:t.editedItem.period.endTime,callback:function(e){t.$set(t.editedItem.period,"endTime",e)},expression:"editedItem.period.endTime"}})],1),s("v-flex",{attrs:{xs4:""}},[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[s("v-text-field",{attrs:{slot:"activator",label:t.$t("EndDate")},slot:"activator",model:{value:t.editedItem.period.endDate,callback:function(e){t.$set(t.editedItem.period,"endDate",e)},expression:"editedItem.period.endDate"}}),s("v-date-picker",{attrs:{"no-title":""},on:{input:function(e){t.menu2=!1}},model:{value:t.editedItem.period.endDate,callback:function(e){t.$set(t.editedItem.period,"endDate",e)},expression:"editedItem.period.endDate"}})],1)],1),s("v-flex",{attrs:{xs12:""}},[s("v-select",{attrs:{items:t.currentServices,"menu-props":{maxHeight:"400"},label:t.$t("Service"),multiple:"",hint:t.$t("ChooseService"),"persistent-hint":""},model:{value:t.editedItem.service,callback:function(e){t.$set(t.editedItem,"service",e)},expression:"editedItem.service"}})],1),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("Resource")},model:{value:t.editedItem.resource,callback:function(e){t.$set(t.editedItem,"resource",e)},expression:"editedItem.resource"}})],1),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("Event")},model:{value:t.editedItem.event,callback:function(e){t.$set(t.editedItem,"event",e)},expression:"editedItem.event"}})],1),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("Group")},model:{value:t.editedItem.group,callback:function(e){t.$set(t.editedItem,"group",e)},expression:"editedItem.group"}})],1),s("v-flex",{attrs:{xs12:""}},[s("v-combobox",{attrs:{items:t.currentTags,label:t.$t("Tags"),multiple:"",chips:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[s("v-chip",{key:JSON.stringify(e.item),staticClass:"v-chip--select-multi",attrs:{selected:e.selected,disabled:e.disabled,label:"",small:""},on:{input:function(t){return e.parent.selectItem(e.item)}}},[s("v-icon",{attrs:{left:""}},[t._v("\n                        label\n                      ")]),t._v(t._s(e.item)+"\n                    ")],1)]}}]),model:{value:t.editedItem.tags,callback:function(e){t.$set(t.editedItem,"tags",e)},expression:"editedItem.tags"}})],1),s("v-flex",{attrs:{xs12:""}},[s("v-text-field",{attrs:{label:t.$t("Reason")},model:{value:t.editedItem.text,callback:function(e){t.$set(t.editedItem,"text",e)},expression:"editedItem.text"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("\n            "+t._s(t.$t("Cancel"))+"\n          ")]),s("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.validate}},[t._v("\n            "+t._s(t.$t("Save"))+"\n          ")])],1)],1)],1)],1),s("v-card",[s("v-card-title",{staticClass:"title"},[t._v("\n      "+t._s(t.$t("Blackouts"))+"\n      "),s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"search",label:t.$t("Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),s("v-data-table",{staticClass:"px-2",attrs:{headers:t.computedHeaders,items:t.blackouts,"rows-per-page-items":t.rowsPerPageItems,pagination:t.pagination,search:t.search,loading:t.isLoading,"must-sort":"","sort-icon":"arrow_drop_down"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[t.$config.customer_views?s("td",[t._v("\n          "+t._s(e.item.customer)+"\n        ")]):t._e(),s("td",[t._v(t._s(e.item.environment))]),s("td",t._l(e.item.service,(function(e){return s("v-chip",{key:e,attrs:{outline:"",small:""}},[t._v("\n            "+t._s(e)+"\n          ")])})),1),s("td",[t._v(t._s(e.item.resource))]),s("td",[t._v(t._s(e.item.event))]),s("td",[t._v(t._s(e.item.group))]),s("td",t._l(e.item.tags,(function(e){return s("v-chip",{key:e,attrs:{label:"",small:""}},[s("v-icon",{attrs:{left:""}},[t._v("\n              label\n            ")]),t._v(t._s(e)+"\n          ")],1)})),1),s("td",{staticClass:"text-xs-right"},[s("v-tooltip",{attrs:{top:""}},[t._v("\n            "+t._s(t._f("capitalize")(e.item.status))+"\n            "),"pending"==e.item.status?s("v-icon",{attrs:{slot:"activator",light:"",small:""},slot:"activator"},[t._v("\n              schedule\n            ")]):t._e(),"active"==e.item.status?s("v-icon",{attrs:{slot:"activator",color:"primary",small:""},slot:"activator"},[t._v("\n              notifications_paused\n            ")]):t._e(),"expired"==e.item.status?s("v-icon",{attrs:{slot:"activator",small:""},slot:"activator"},[t._v("\n              block\n            ")]):t._e()],1)],1),s("td",{staticClass:"text-xs-left"},[s("date-time",{attrs:{value:e.item.startTime,format:"mediumDate"}})],1),s("td",{staticClass:"text-xs-left"},[s("date-time",{attrs:{value:e.item.endTime,format:"mediumDate"}})],1),s("td",{staticClass:"text-xs-left text-no-wrap"},[t._v("\n          "+t._s(t._f("until")(e.item.endTime))+"\n        ")]),s("td",{staticClass:"text-xs-left"},[t._v("\n          "+t._s(e.item.user)+"\n        ")]),s("td",{staticClass:"text-xs-left"},[t._v("\n          "+t._s(e.item.text)+"\n        ")]),s("td",{staticClass:"text-no-wrap"},[s("v-btn",{directives:[{name:"has-perms",rawName:"v-has-perms.disable",value:"write:blackouts",expression:"'write:blackouts'",modifiers:{disable:!0}}],staticClass:"btn--plain mr-0",attrs:{icon:""},on:{click:function(s){return t.editItem(e.item)}}},[s("v-icon",{attrs:{small:"",color:"grey darken-3"}},[t._v("\n              edit\n            ")])],1),s("v-btn",{directives:[{name:"has-perms",rawName:"v-has-perms.disable",value:"write:blackouts",expression:"'write:blackouts'",modifiers:{disable:!0}}],staticClass:"btn--plain mx-0",attrs:{icon:""},on:{click:function(s){return t.copyItem(e.item)}}},[s("v-icon",{attrs:{small:"",color:"grey darken-3"}},[t._v("\n              content_copy\n            ")])],1),s("v-btn",{directives:[{name:"has-perms",rawName:"v-has-perms.disable",value:"write:blackouts",expression:"'write:blackouts'",modifiers:{disable:!0}}],staticClass:"btn--plain mx-0",attrs:{icon:""},on:{click:function(s){return t.deleteItem(e.item)}}},[s("v-icon",{attrs:{small:"",color:"grey darken-3"}},[t._v("\n              delete\n            ")])],1)],1)]}}])},[s("template",{slot:"no-data"},[s("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n          "+t._s(t.$t("NoDisplay"))+"\n        ")])],1),s("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v("\n        "+t._s(t.$t("SearchNoResult1"))+' "'+t._s(t.search)+'" '+t._s(t.$t("SearchNoResult2"))+"\n      ")])],2)],1),s("list-button-add",{attrs:{perms:"write:blackouts"},on:{"add-to-list":function(e){t.dialog=!0}}})],1)},m=[],v=(s("5df3"),s("1c4c"),s("6377")),p=s("1711"),f=s("c1df"),h=s.n(f),g=s("fe0b"),b={components:{DateTime:v["a"],ListButtonAdd:p["a"]},data:function(t){return{descending:!0,page:1,rowsPerPageItems:[10,20,30,40,50],pagination:{sortBy:"startTime",rowsPerPage:20},search:"",dialog:!1,headers:[{text:g["a"].t("Customer"),value:"customer"},{text:g["a"].t("Environment"),value:"environment"},{text:g["a"].t("Service"),value:"service"},{text:g["a"].t("Resource"),value:"resource"},{text:g["a"].t("Event"),value:"event"},{text:g["a"].t("Group"),value:"group"},{text:g["a"].t("Tags"),value:"tags"},{text:"",value:"status"},{text:g["a"].t("Start"),value:"startTime"},{text:g["a"].t("End"),value:"endTime"},{text:g["a"].t("Expires"),value:"remaining"},{text:g["a"].t("User"),value:"user"},{text:g["a"].t("Reason"),value:"text"},{text:g["a"].t("Actions"),value:"name",sortable:!1}],editedId:null,editedItem:{customer:null,environment:null,service:[],resource:null,event:null,group:null,tags:[],period:{startDate:null,startTime:null,endDate:null,endTime:null},text:""},menu1:!1,menu2:!1,defaultItem:{customer:null,environment:null,service:[],resource:null,event:null,group:null,tags:[],period:{startDate:null,startTime:null,endDate:null,endTime:null},text:""},rules:{required:function(t){return!!t||g["a"].t("Required")}}}},computed:{blackouts:function(){return this.$store.state.blackouts.blackouts.map((function(t){var e=h()(t.startTime),s=h()(t.endTime);return Object.assign(t,{period:{startDate:e.format("YYYY-MM-DD"),startTime:e.format("HH:mm"),endDate:s.format("YYYY-MM-DD"),endTime:s.format("HH:mm")}})}))},computedHeaders:function(){var t=this;return this.headers.filter((function(e){return!!t.$config.customer_views||"customer"!=e.value}))},allowedCustomers:function(){return this.$store.getters["customers/customers"]},allowedEnvironments:function(){return this.$store.getters["alerts/environments"]},currentServices:function(){return this.$store.getters["alerts/services"]},currentTags:function(){return this.$store.getters["alerts/tags"]},isLoading:function(){return this.$store.state.blackouts.isLoading},formTitle:function(){return this.editedId?g["a"].t("EditBlackout"):g["a"].t("NewBlackout")},times:function(){return Array.from({length:96},(function(t,e){var s=Math.floor(15*e/60),a=15*e-60*s;return("0"+s).slice(-2)+":"+("0"+a).slice(-2)}))},refresh:function(){return this.$store.state.refresh}},watch:{dialog:function(t){t||this.close()},refresh:function(t){t&&(this.getBlackouts(),this.getCustomers(),this.getEnvironments(),this.getServices(),this.getTags())}},created:function(){this.getBlackouts(),this.getCustomers(),this.getEnvironments(),this.getServices(),this.getTags(),this.editedItem=Object.assign({},this.defaultItem),this.editedItem.period=this.defaultTimes()},methods:{getBlackouts:function(){this.$store.dispatch("blackouts/getBlackouts")},getCustomers:function(){this.$store.dispatch("customers/getCustomers")},getEnvironments:function(){this.$store.dispatch("alerts/getEnvironments")},getServices:function(){this.$store.dispatch("alerts/getServices")},getTags:function(){this.$store.dispatch("alerts/getTags")},getNext15mins:function(t){return h()(new Date(1e3*Math.ceil(t.getTime()/1e3/60/15)*60*15).toISOString())},defaultTimes:function(){var t=new Date,e=this.getNext15mins(t);t.setTime(t.getTime()+36e5);var s=this.getNext15mins(t);return{startDate:e.format("YYYY-MM-DD"),startTime:e.format("HH:mm"),endDate:s.format("YYYY-MM-DD"),endTime:s.format("HH:mm")}},toISODate:function(t,e){return new Date(t+" "+e).toISOString()},editItem:function(t){this.editedId=t.id,this.editedItem=Object.assign({},t),this.dialog=!0},copyItem:function(t){this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){confirm(g["a"].t("ConfirmDelete"))&&this.$store.dispatch("blackouts/deleteBlackout",t.id)},close:function(){var t=this;this.dialog=!1,setTimeout((function(){t.$refs.form.resetValidation(),t.editedItem=Object.assign({},t.defaultItem),t.editedItem.period=t.defaultTimes(),t.editedId=null}),300)},validate:function(){this.$refs.form.validate()&&(this.$refs.form.resetValidation(),this.save())},save:function(){this.editedId?this.$store.dispatch("blackouts/updateBlackout",[this.editedId,{customer:this.editedItem.customer,environment:this.editedItem.environment,service:this.editedItem.service,resource:this.editedItem.resource,event:this.editedItem.event,group:this.editedItem.group,tags:this.editedItem.tags,startTime:this.toISODate(this.editedItem.period.startDate,this.editedItem.period.startTime),endTime:this.toISODate(this.editedItem.period.endDate,this.editedItem.period.endTime),text:this.editedItem.text}]):this.$store.dispatch("blackouts/createBlackout",Object.assign(this.editedItem,{startTime:this.toISODate(this.editedItem.period.startDate,this.editedItem.period.startTime),endTime:this.toISODate(this.editedItem.period.endDate,this.editedItem.period.endTime)})),this.close()}}},x=b,_=s("2877"),$=s("6544"),k=s.n($),T=s("0798"),y=s("8336"),I=s("b0af"),C=s("99d9"),D=s("12b2"),w=s("cc20"),S=s("2b5d"),O=s("a523"),V=s("8fea"),j=s("2e4b"),P=s("169a"),E=s("0e8f"),A=s("4bd4"),L=s("132d"),H=s("a722"),M=s("e449"),F=s("b56d"),R=s("9910"),B=s("2677"),Y=s("3a2f"),U=Object(_["a"])(x,d,m,!1,null,null,null),N=U.exports;k()(U,{VAlert:T["a"],VBtn:y["a"],VCard:I["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:D["a"],VChip:w["a"],VCombobox:S["a"],VContainer:O["a"],VDataTable:V["a"],VDatePicker:j["a"],VDialog:P["a"],VFlex:E["a"],VForm:A["a"],VIcon:L["a"],VLayout:H["a"],VMenu:M["a"],VSelect:F["a"],VSpacer:R["a"],VTextField:B["a"],VTooltip:Y["a"]});var z=function(t){function e(){return Object(n["a"])(this,e),Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),e}(u["c"]);z=Object(c["a"])([Object(u["a"])({components:{BlackoutList:N}})],z);var K=z,q=K,G=Object(_["a"])(q,a,i,!1,null,null,null);e["default"]=G.exports},"934c":function(t,e,s){},a6f2:function(t,e,s){"use strict";var a=s("411e"),i=s.n(a);i.a},afb3:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"heartbeats"},[s("heartbeat-list")],1)},i=[],n=s("d225"),r=s("308d"),o=s("6bb5"),l=s("4e2b"),c=s("9ab4"),u=s("60a3"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-card-title",{staticClass:"title"},[t._v("\n    "+t._s(t.$t("Heartbeats"))+"\n    "),s("v-spacer"),s("v-btn-toggle",{staticClass:"transparent",attrs:{multiple:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[s("v-btn",{attrs:{value:"ok",flat:""}},[s("v-tooltip",{attrs:{bottom:""}},[s("v-icon",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n            check_circle\n          ")]),s("span",[t._v(t._s(t.$t("OK")))])],1)],1),s("v-btn",{attrs:{value:"slow",flat:""}},[s("v-tooltip",{attrs:{bottom:""}},[s("v-icon",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n            access_time\n          ")]),s("span",[t._v(t._s(t.$t("Slow")))])],1)],1),s("v-btn",{attrs:{value:"expired",flat:""}},[s("v-tooltip",{attrs:{bottom:""}},[s("v-icon",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n            timer_off\n          ")]),s("span",[t._v(t._s(t.$t("Expired")))])],1)],1)],1),s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"search",label:t.$t("Search"),"single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),s("v-data-table",{staticClass:"px-2",attrs:{headers:t.computedHeaders,items:t.heartbeats,"rows-per-page-items":t.rowsPerPageItems,pagination:t.pagination,search:t.search,loading:t.isLoading,"must-sort":"","sort-icon":"arrow_drop_down"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.origin))]),t.$config.customer_views?s("td",[t._v("\n        "+t._s(e.item.customer)+"\n      ")]):t._e(),s("td",t._l(e.item.tags,(function(e){return s("v-chip",{key:e,attrs:{label:"",small:""}},[s("v-icon",{attrs:{left:""}},[t._v("\n            label\n          ")]),t._v(t._s(e)+"\n        ")],1)})),1),s("td",[t._v("\n        "+t._s(e.item.attributes)+"\n      ")]),s("td",[s("date-time",{attrs:{value:e.item.createTime,format:"mediumDate"}})],1),s("td",[s("date-time",{attrs:{value:e.item.receiveTime,format:"mediumDate"}})],1),s("td",[t._v("\n        "+t._s(t.diffTime(e.item.createTime,e.item.receiveTime))+" ms\n      ")]),s("td",{staticClass:"text-xs-center text-no-wrap"},[t._v("\n        "+t._s(t._f("hhmmss")(t.timeoutLeft(e.item)))+"\n      ")]),s("td",[t._v("\n        "+t._s(t._f("timeago")(e.item.receiveTime))+"\n      ")]),s("td",[s("span",{class:["label","label-"+e.item.status.toLowerCase()]},[t._v("\n          "+t._s(t._f("capitalize")(e.item.status))+"\n        ")])]),s("td",{staticClass:"text-no-wrap"},[s("v-btn",{directives:[{name:"has-perms",rawName:"v-has-perms.disable",value:"write:heartbeats",expression:"'write:heartbeats'",modifiers:{disable:!0}}],staticClass:"btn--plain mr-0",attrs:{icon:""},on:{click:function(s){return t.deleteItem(e.item)}}},[s("v-icon",{attrs:{small:"",color:"grey darken-3"}},[t._v("\n            delete\n          ")])],1)],1)]}}])},[s("template",{slot:"no-data"},[s("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[t._v("\n        "+t._s(t.$t("NoDisplay"))+"\n      ")])],1),s("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v("\n      "+t._s(t.$t("SearchNoResult1"))+' "'+t._s(t.search)+'" '+t._s(t.$t("SearchNoResult2"))+"\n    ")])],2)],1)},m=[],v=(s("6762"),s("2fdb"),s("6377")),p=s("c1df"),f=s.n(p),h=s("fe0b"),g={components:{DateTime:v["a"]},data:function(){return{descending:!0,page:1,rowsPerPageItems:[10,20,30,40,50],pagination:{sortBy:"receiveTime",descending:!0,rowsPerPage:20},status:["ok","slow","expired"],search:"",headers:[{text:h["a"].t("Origin"),value:"origin"},{text:h["a"].t("Customer"),value:"customer"},{text:h["a"].t("Tags"),value:"tags"},{text:h["a"].t("Attributes"),value:"attributes"},{text:h["a"].t("CreateTime"),value:"createTime"},{text:h["a"].t("ReceiveTime"),value:"receiveTime"},{text:h["a"].t("Latency"),value:"latency"},{text:h["a"].t("Timeout"),value:"timeout"},{text:h["a"].t("Since"),value:"since"},{text:h["a"].t("Status"),value:"status"},{text:h["a"].t("Actions"),value:"name",sortable:!1}]}},computed:{heartbeats:function(){var t=this;return this.$store.state.heartbeats.heartbeats.filter((function(e){return!t.status||t.status.includes(e.status)}))},computedHeaders:function(){var t=this;return this.headers.filter((function(e){return!!t.$config.customer_views||"customer"!=e.value}))},isLoading:function(){return this.$store.state.heartbeats.isLoading},refresh:function(){return this.$store.state.refresh}},watch:{refresh:function(t){t||this.getHeartbeats()}},created:function(){this.getHeartbeats()},methods:{timeoutLeft:function(t){var e=f()(t.createTime).add(t.timeout,"seconds");return e.isAfter()?e.diff(f()(),"seconds"):f.a.duration()},getHeartbeats:function(){this.$store.dispatch("heartbeats/getHeartbeats")},deleteItem:function(t){confirm(h["a"].t("ConfirmDelete"))&&this.$store.dispatch("heartbeats/deleteHeartbeat",t.id)},diffTime:function(t,e){return new Date(e).getTime()-new Date(t).getTime()}}},b=g,x=(s("b862"),s("2877")),_=s("6544"),$=s.n(_),k=s("0798"),T=s("8336"),y=(s("934c"),s("604c")),I=y["a"].extend({name:"button-group",provide:function(){return{btnToggle:this}},props:{activeClass:{type:String,default:"v-btn--active"}},computed:{classes:function(){return y["a"].options.computed.classes.call(this)}}}),C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},D=I.extend({name:"v-btn-toggle",props:{activeClass:{type:String,default:"v-btn--active"}},computed:{classes:function(){return C({},I.options.computed.classes.call(this),{"v-btn-toggle":!0,"v-btn-toggle--only-child":1===this.selectedItems.length,"v-btn-toggle--selected":this.selectedItems.length>0})}}}),w=s("b0af"),S=s("12b2"),O=s("cc20"),V=s("8fea"),j=s("132d"),P=s("9910"),E=s("2677"),A=s("3a2f"),L=Object(x["a"])(b,d,m,!1,null,null,null),H=L.exports;$()(L,{VAlert:k["a"],VBtn:T["a"],VBtnToggle:D,VCard:w["a"],VCardTitle:S["a"],VChip:O["a"],VDataTable:V["a"],VIcon:j["a"],VSpacer:P["a"],VTextField:E["a"],VTooltip:A["a"]});var M=function(t){function e(){return Object(n["a"])(this,e),Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),e}(u["c"]);M=Object(c["a"])([Object(u["a"])({components:{HeartbeatList:H}})],M);var F=M,R=F,B=Object(x["a"])(R,a,i,!1,null,null,null);e["default"]=B.exports},b862:function(t,e,s){"use strict";var a=s("f50d"),i=s.n(a);i.a},c11b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reports"},[s("top-offenders"),s("top-flapping"),s("top-standing")],1)},i=[],n=s("d225"),r=s("308d"),o=s("6bb5"),l=s("4e2b"),c=s("9ab4"),u=s("60a3"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("div",[s("div",{staticClass:"headline"},[t._v("\n          "+t._s(t.$t("TopOffenders"))+"\n        ")]),s("br"),s("span",{staticClass:"grey--text"},[t._v(t._s(t.$t("TopOffendersDescription")))])]),s("v-spacer")],1),s("v-data-table",{staticClass:"px-2",attrs:{headers:t.headers,items:t.top10,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.event))]),s("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.count)+"\n        ")]),s("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.duplicateCount)+"\n        ")]),s("td",[t._v(t._s(e.item.environments.join(", ")))]),s("td",[t._v(t._s(e.item.services.join(", ")))]),s("td",t._l(e.item.resources,(function(e){return s("span",{key:e.id},[s("router-link",{attrs:{to:"/alert/"+e.id}},[t._v("\n              "+t._s(e.resource)+"\n            ")])],1)})),0)]}}])})],1)],1)},m=[],v=(s("c1df"),s("fe0b")),p={data:function(){return{headers:[{text:v["a"].t("Event"),value:"event",sortable:!1},{text:v["a"].t("Count"),value:"count",sortable:!1},{text:v["a"].t("DuplCount"),value:"duplicateCount",sortable:!1},{text:v["a"].t("Environment"),value:"environment",sortable:!1},{text:v["a"].t("Services"),value:"services",sortable:!1},{text:v["a"].t("Resources"),value:"resources",sortable:!1}]}},computed:{top10:function(){return this.$store.state.alerts.offenders},refresh:function(){return this.$store.state.refresh}},watch:{refresh:function(t){t||this.getTopOffenders()}},created:function(){this.getTopOffenders()},methods:{getTopOffenders:function(){return this.$store.dispatch("alerts/getTopOffenders")}}},f=p,h=s("2877"),g=s("6544"),b=s.n(g),x=s("b0af"),_=s("12b2"),$=s("8fea"),k=s("9910"),T=Object(h["a"])(f,d,m,!1,null,null,null),y=T.exports;b()(T,{VCard:x["a"],VCardTitle:_["a"],VDataTable:$["a"],VSpacer:k["a"]});var I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("div",[s("div",{staticClass:"headline"},[t._v("\n          "+t._s(t.$t("TopFlapping"))+"\n        ")]),s("br"),s("span",{staticClass:"grey--text"},[t._v(t._s(t.$t("TopFlappingDescription")))])]),s("v-spacer")],1),s("v-data-table",{staticClass:"px-2",attrs:{headers:t.headers,items:t.top10,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.event))]),s("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.count)+"\n        ")]),s("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.duplicateCount)+"\n        ")]),s("td",[t._v(t._s(e.item.environments.join(", ")))]),s("td",[t._v(t._s(e.item.services.join(", ")))]),s("td",t._l(e.item.resources,(function(e){return s("span",{key:e.id},[s("router-link",{attrs:{to:"/alert/"+e.id}},[t._v("\n              "+t._s(e.resource)+"\n            ")])],1)})),0)]}}])})],1)],1)},C=[],D={data:function(){return{headers:[{text:v["a"].t("Event"),value:"event",sortable:!1},{text:v["a"].t("Count"),value:"count",sortable:!1},{text:v["a"].t("DuplCount"),value:"duplicateCount",sortable:!1},{text:v["a"].t("Environment"),value:"environment",sortable:!1},{text:v["a"].t("Services"),value:"services",sortable:!1},{text:v["a"].t("Resources"),value:"resources",sortable:!1}]}},computed:{top10:function(){return this.$store.state.alerts.flapping},refresh:function(){return this.$store.state.refresh}},watch:{refresh:function(t){t||this.getTopFlapping()}},created:function(){this.getTopFlapping()},methods:{getTopFlapping:function(){return this.$store.dispatch("alerts/getTopFlapping")}}},w=D,S=Object(h["a"])(w,I,C,!1,null,null,null),O=S.exports;b()(S,{VCard:x["a"],VCardTitle:_["a"],VDataTable:$["a"],VSpacer:k["a"]});var V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",[s("v-card-title",{attrs:{"primary-title":""}},[s("div",[s("div",{staticClass:"headline"},[t._v("\n          "+t._s(t.$t("TopStanding"))+"\n        ")]),s("br"),s("span",{staticClass:"grey--text"},[t._v(t._s(t.$t("TopStandingDescription")))])]),s("v-spacer")],1),s("v-data-table",{staticClass:"px-2",attrs:{headers:t.headers,items:t.top10,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.event))]),s("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.count)+"\n        ")]),s("td",{staticClass:"text-xs-center"},[t._v("\n          "+t._s(e.item.duplicateCount)+"\n        ")]),s("td",[t._v(t._s(e.item.environments.join(", ")))]),s("td",[t._v(t._s(e.item.services.join(", ")))]),s("td",t._l(e.item.resources,(function(e){return s("span",{key:e.id},[s("router-link",{attrs:{to:"/alert/"+e.id}},[t._v("\n              "+t._s(e.resource)+"\n            ")])],1)})),0)]}}])})],1)],1)},j=[],P={data:function(){return{headers:[{text:v["a"].t("Event"),value:"event",sortable:!1},{text:v["a"].t("Count"),value:"count",sortable:!1},{text:v["a"].t("DuplCount"),value:"duplicateCount",sortable:!1},{text:v["a"].t("Environment"),value:"environment",sortable:!1},{text:v["a"].t("Services"),value:"services",sortable:!1},{text:v["a"].t("Resources"),value:"resources",sortable:!1}]}},computed:{top10:function(){return this.$store.state.alerts.standing},refresh:function(){return this.$store.state.refresh}},watch:{refresh:function(t){t||this.getTopStanding()}},created:function(){this.getTopStanding()},methods:{getTopStanding:function(){return this.$store.dispatch("alerts/getTopStanding")}}},E=P,A=Object(h["a"])(E,V,j,!1,null,null,null),L=A.exports;b()(A,{VCard:x["a"],VCardTitle:_["a"],VDataTable:$["a"],VSpacer:k["a"]});var H=function(t){function e(){return Object(n["a"])(this,e),Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),e}(u["c"]);H=Object(c["a"])([Object(u["a"])({components:{TopOffenders:y,TopFlapping:O,TopStanding:L}})],H);var M=H,F=M,R=Object(h["a"])(F,a,i,!1,null,null,null);e["default"]=R.exports},d408:function(t,e,s){},e804:function(t,e,s){"use strict";var a=s("5ca1"),i=s("f1ae");a(a.S+a.F*s("79e5")((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){var t=0,e=arguments.length,s=new("function"==typeof this?this:Array)(e);while(e>t)i(s,t,arguments[t++]);return s.length=e,s}})},f50d:function(t,e,s){},f820:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"about"},[s("manifest"),s("status")],1)},i=[],n=s("d225"),r=s("308d"),o=s("6bb5"),l=s("4e2b"),c=s("9ab4"),u=s("60a3"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-data-table",{staticClass:"px-2",attrs:{headers:t.headers,items:t.manifest,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-center"},[t._v("\n      "+t._s(t.version)+"\n    ")]),s("td",[s("span",{staticClass:"hidden-sm-and-down"},[t._v(t._s(t._f("capitalize")(t.application))+" "+t._s(t.$t("API"))+" ")]),t._v(t._s(e.item.release)+"\n    ")]),s("td",[t._v(t._s(e.item.build))]),s("td",[e.item.date?s("date-time",{attrs:{value:e.item.date,format:"mediumDate"}}):t._e()],1),s("td",[s("span",{staticClass:"hidden-sm-and-down"},[t._v(t._s(e.item.revision))]),s("span",{staticClass:"show-md-and-up"},[t._v(t._s(e.item.revision.substring(0,7)))]),s("a",{attrs:{href:"https://github.com/alerta/alerta/commit/"+e.item.revision,target:"_blank"}},[s("v-tooltip",{attrs:{right:""}},[t._v("\n          "+t._s(t.$t("OpenGitHub"))+"\n          "),s("v-icon",{attrs:{slot:"activator",small:""},slot:"activator"},[t._v("launch")])],1)],1)]),s("td",[s("a",{attrs:{href:t.$config.endpoint,target:"_blank"}},[s("span",{staticClass:"monospace"},[t._v(t._s(t.$config.endpoint))])]),s("v-tooltip",{key:t.copyIconText,attrs:{top:""}},[s("v-icon",{staticClass:"px-1",attrs:{slot:"activator",small:""},on:{click:function(e){return t.clipboardCopy(t.$config.endpoint)}},slot:"activator"},[t._v("\n          content_copy\n        ")]),s("span",[t._v(t._s(t.copyIconText))])],1)],1)]}}])})},m=[],v=(s("e804"),s("6377")),p=s("fe0b"),f={components:{DateTime:v["a"]},data:function(){return{headers:[{text:p["a"].t("WebUI"),value:"version",sortable:!1},{text:p["a"].t("API"),value:"release",sortable:!1},{text:p["a"].t("Build"),value:"build",sortable:!1},{text:p["a"].t("Date"),value:"date",sortable:!1},{text:p["a"].t("GitRevision"),value:"revision",sortable:!1},{text:p["a"].t("APIEndpoint"),value:"endpoint",sortable:!1}],manifest:[],copyIconText:p["a"].t("Copy")}},computed:{application:function(){return this.$store.state.management.application},version:function(){return"7.4.4"},refresh:function(){return this.$store.state.refresh}},watch:{refresh:function(t){t||this.getManifest()}},created:function(){var t=this;this.getManifest().then((function(){return t.manifest=Array.of(t.$store.state.management.manifest)}))},methods:{getManifest:function(){return this.$store.dispatch("management/getManifest")},clipboardCopy:function(t){var e=this;this.copyIconText=p["a"].t("Copied");var s=document.createElement("textarea");s.textContent=t,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),setTimeout((function(){e.copyIconText=p["a"].t("Copy")}),2e3)}}},h=f,g=(s("a6f2"),s("2877")),b=s("6544"),x=s.n(b),_=s("8fea"),$=s("132d"),k=s("3a2f"),T=Object(g["a"])(h,d,m,!1,null,"5427015f",null),y=T.exports;x()(T,{VDataTable:_["a"],VIcon:$["a"],VTooltip:k["a"]});var I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-data-table",{staticClass:"px-2",attrs:{headers:t.headers,items:t.metrics,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(e.item.title))]),s("td",[t._v(t._s(t._f("capitalize")(e.item.type)))]),s("td",[t._v(t._s(e.item.group)+"."+t._s(e.item.name))]),s("td",[t._v(t._s(e.item.value||e.item.count))]),s("td",[t._v(t._s(t.avgTime(e.item)))])]}}])}),s("v-data-table",{staticClass:"px-2",attrs:{headers:[{sortable:!1},{sortable:!1},{sortable:!1},{sortable:!1}],items:t.uptime,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[t._v(t._s(t.$t("LastUpdate")))]),s("td",[e.item.lastTime?s("date-time",{attrs:{value:e.item.lastTime,format:"longDate"}}):t._e()],1),s("td",[t._v(t._s(t.$t("Uptime")))]),s("td",[t._v(t._s(t._f("days")(e.item.uptime/1e3)))])]}}])})],1)},C=[],D=s("c1df"),w=s.n(D),S={components:{DateTime:v["a"]},data:function(){return{headers:[{text:p["a"].t("Metric"),value:"title",sortable:!1},{text:p["a"].t("Type"),value:"type",sortable:!1},{text:p["a"].t("Name"),value:"name",sortable:!1},{text:p["a"].t("Value"),value:"value",sortable:!1},{text:p["a"].t("AvgTime"),value:"time",sortable:!1}]}},computed:{metrics:function(){return this.$store.state.management.metrics},uptime:function(){return[{lastTime:w()(this.$store.state.management.time).utc().toISOString(),uptime:this.$store.state.management.uptime}]},refresh:function(){return this.$store.state.refresh}},watch:{refresh:function(t){t||this.getStatus()}},created:function(){this.getStatus()},methods:{getStatus:function(){return this.$store.dispatch("management/getStatus")},avgTime:function(t){return"timer"==t.type?(t.totalTime/t.count).toFixed(2)+" ms":"n/a"}}},O=S,V=Object(g["a"])(O,I,C,!1,null,null,null),j=V.exports;x()(V,{VDataTable:_["a"]});var P=function(t){function e(){return Object(n["a"])(this,e),Object(r["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),e}(u["c"]);P=Object(c["a"])([Object(u["a"])({components:{Manifest:y,Status:j}})],P);var E=P,A=E,L=Object(g["a"])(A,a,i,!1,null,null,null);e["default"]=L.exports}}]);
//# sourceMappingURL=user.e4ec56a1.js.map